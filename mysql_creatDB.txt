create database coupleapp
use coupleapp

drop table tbl_userinfor
go
create table tbl_userinfor(
	UserId int AUTO_INCREMENT  primary key,
	name varchar(255) ,
    gmail varchar(255) not null,
    password varchar(255) not null,
	gender bit not null,
	birthday date ,
	coupleId int ,
	avatar TEXT(500),
    code int
)
;
create table tbl_couple(
	coupleId int primary key AUTO_INCREMENT,
	start date,
	image TEXT(500)
)

;
create table tbl_chat(
	chatID int,
	content TEXT(1000),
	time date,
    userid int,
        FOREIGN KEY (userid) REFERENCES tbl_userinfor(userid),
	PRIMARY KEY (chatID,userid)
)
;
create table tbl_memory(
	memoryID int not null,
	image Text(500),
	dateofmemory date,
	caption Text(1000),
    userid int,
        FOREIGN KEY (userid) REFERENCES tbl_userinfor(userid),
	PRIMARY KEY NONCLUSTERED (memoryID,userid)
)
;
create table tbl_comment(
	commentID int ,
	content Text(1000) not null,
	memoryId int ,
	userid int ,
	datecreat date,
    FOREIGN KEY (userid) REFERENCES tbl_userinfor(userid),
	PRIMARY KEY  (commentID,memoryId)
)

;
ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '1234$'
